<?xml version="1.0"?>
<simulation name ="ROSS_template"
    language="c" xmlns="http://damaris.gforge.inria.fr/damaris/model">
    <architecture>
        <domains count="10000"/>
        <dedicated cores="1" nodes="0"/>
        <buffer name="buffer" size="1073700000" blocks="1"/>
        <queue name="queue" size="100"/>
    </architecture>
    <data>
        <parameter name="num_lp" type="int" value="0" />
        <parameter name="num_pe" type="int" value="0" />
        <parameter name="num_kp" type="int" value="0" />
        <parameter name="sample_size" type="int" value="524288" />
        <parameter name="md_size" type="int" value="524288" />

        <layout name="pe_id_layout" type="double" dimensions="2" />
        <layout name="dummy_layout" type="double" dimensions="2" />

        <layout name="lp_id_layout" type="double" dimensions="num_lp+1" />
        <layout name="lp_int_layout" type="int" dimensions="num_lp" />
        <layout name="lp_long_layout" type="long" dimensions="num_lp" />
        <layout name="lp_float_layout" type="float" dimensions="num_lp" />
        <layout name="lp_double_layout" type="double" dimensions="num_lp" />

        <layout name="kp_id_layout" type="double" dimensions="num_kp+1" />
        <layout name="kp_int_layout" type="int" dimensions="num_kp" />
        <layout name="kp_long_layout" type="long" dimensions="num_kp" />
        <layout name="kp_float_layout" type="float" dimensions="num_kp" />
        <layout name="kp_double_layout" type="double" dimensions="num_kp" />
        <layout name="inst_config_layout" type="char" dimensions="1024" />
        <layout name="flatbuf_data_layout" type="char" dimensions="sample_size" />
        <layout name="sample_data_layout" type="char" dimensions="sample_size" />
        <layout name="md_data_layout" type="char" dimensions="md_size" />

        <!-- The groups and variables nested under the ross group are for simulation engine metrics.
        Do not touch these, or you risk errors when running your simulation! -->
        <group name="ross">
            <group name="inst_sample">
                <variable name="gvt_inst" layout="sample_data_layout" visualizable="false" time-varying="true" />
                <variable name="rts_inst" layout="sample_data_layout" visualizable="false" time-varying="true" />
                <variable name="vts_inst" layout="sample_data_layout" visualizable="false" time-varying="true" />
            </group>
            <variable name="sample_size" layout="int" visualizable="false" time-varying="true" />
            <variable name="sample" layout="flatbuf_data_layout" visualizable="false" time-varying="true" />
            <variable name="inst_config" layout="inst_config_layout" visualizable="false" time-varying="false" />
            <variable name="nlp" layout="int" visualizable="false" time-varying="false" />
            <variable name="nkp" layout="int" visualizable="false" time-varying="false" />
            <variable name="last_gvt" layout="double" time-varying="true" />

            <!-- for dealing with RB related stuff for VTS model data -->
            <group name="vt_rb">
                <variable name="vts" layout="double" time-varying="true" />
                <variable name="rts" layout="double" time-varying="true" />
                <variable name="kp_gid" layout="int" time-varying="true" />
            </group>
            <group name="vt_commit">
                <variable name="vts" layout="double" time-varying="true" />
                <variable name="rts" layout="double" time-varying="true" />
                <variable name="kp_gid" layout="int" time-varying="true" />
            </group>
        </group>
        <group name="model_map">
            <variable name="lp_md" layout="md_data_layout" time-varying="false" />
        </group>
    </data>

    <!-- Do not edit anything under actions, as it could break your simulation! -->
    <actions>
        <event name="damaris_gc" action="damaris_gc" library="libRISA-plugins.so" scope="group"/>
        <event name="damaris_rank_init" action="damaris_rank_init" library="libRISA-plugins.so" scope="group"/>
        <event name="end_iteration" action="damaris_rank_end_iteration" library="libRISA-plugins.so" scope="group"/>
        <event name="damaris_rank_finalize" action="damaris_rank_finalize" library="libRISA-plugins.so" scope="group"/>
    </actions>
</simulation>

